---
permalink: sm-support/overview-upgrade-center.html 
sidebar: sidebar 
keywords: SANtricity, System Manager, E-Series, upgrade, center 
summary: アップグレードセンターを使用して最新のソフトウェアとファームウェアをダウンロードし、ストレージアレイをアップグレードして最新の機能とバグ修正を入手します。 
---
= Upgrade Centerの概要
:allow-uri-read: 
:experimental: 
:icons: font
:imagesdir: ../media/


[role="lead"]
アップグレードセンターを使用して、最新のソフトウェアとファームウェアをダウンロードし、コントローラとドライブをアップグレードします。



== コントローラのアップグレードの概要

ストレージアレイのソフトウェアとファームウェアをアップグレードして、最新の機能とバグ修正をすべて適用することができます。



=== OSコントローラのアップグレードに含まれるコンポーネント

ストレージアレイのいくつかのコンポーネントには、適宜アップグレードが必要なソフトウェアやハードウェアが含まれています。

* *管理ソフトウェア*-- System Managerはストレージ・アレイを管理するソフトウェアです
* * コントローラファームウェア * -- コントローラファームウェアは、ホストとボリューム間の I/O を管理します。
* * コントローラ NVSRAM * -- コントローラ NVSRAM は、コントローラのデフォルト設定を指定するコントローラファイルです。
* * IOM ファームウェア * - I/O モジュール（ IOM ）ファームウェアは、コントローラとドライブシェルフの間の接続を管理します。また、コンポーネントのステータスも監視します。
* * スーパーバイザー・ソフトウェア * -- スーパーバイザー・ソフトウェアは、ソフトウェアが実行されるコントローラ上の仮想マシンです。


image::../media/sam1130-dwg-upgrade-firmware-locations.gif[SA1130 DWGアップグレードファームウェアの場所]

^1コントローラシェルフ；^2^ドライブシェルフ；^3^ソフトウェア、コントローラファームウェア、コントローラNVSRAM、 スーパーバイザーソフトウェア、^4^Driveファームウェア、^5^IOMファームウェア、^6^Driveファームウェア

現在のソフトウェアとファームウェアのバージョンは、Software and Firmware Inventory（ソフトウェアとファームウェアのインベントリ）ダイアログボックスで確認できます。[Upgrade Center] メニューに移動し、 [* Software and Firmware Inventory] のリンクをクリックします。

アップグレードプロセスの一環として、ホストがコントローラと正しく連携するように、ホストのマルチパス/フェイルオーバードライバやHBAドライバのアップグレードも必要になることがあります。該当するかどうかを確認するには、を参照してください https://imt.netapp.com/matrix/#welcome["NetApp Interoperability Matrix Toolで確認できます"^]。



=== I/Oを停止するタイミング

ストレージアレイにコントローラが2台あり、マルチパスドライバがインストールされている場合は、アップグレードの実行中もストレージアレイでI/Oの処理を継続できます。アップグレードでは、コントローラAのすべてのボリュームがコントローラBにフェイルオーバーしてコントローラAがアップグレードされます。その後、コントローラAにボリュームとコントローラBのすべてのボリュームがテイクオーバーされ、コントローラBがアップグレードされます



=== アップグレード前の健常性チェック

アップグレードプロセスの一環として、アップグレード前の健常性チェックが実行されます。アップグレード前の健常性チェックでは、ストレージアレイのすべてのコンポーネントについて、アップグレードを実行できる状態であるかがチェックされます。次の状況に該当する場合、アップグレードを実行できないことがあり

* 割り当てられたドライブで障害が発生し
* ホットスペアを使用中です
* 不完全なボリュームグループです
* 同時に実行できません
* ボリュームが見つからない
* コントローラのステータスが最適でない
* イベントログイベントが多すぎます
* 構成データベースの検証に失敗しました
* ドライブの DACstore のバージョンが古い


アップグレード前の健常性チェックは、アップグレードとは別に実行することもできます。



== ドライブのアップグレードの概要

ドライブファームウェアは、ドライブの細かな動作特性を制御します。新機能の追加、パフォーマンスの向上、および不具合の修正のために、ドライブメーカーはドライブファームウェアの更新を定期的にリリースしています。



=== ドライブファームウェアのオンラインアップグレードとオフラインアップグレード

ドライブファームウェアのアップグレード方式には、オンラインとオフラインの 2 種類があります。



==== オンライン

オンラインアップグレードでは、ドライブが一度に 1 つずつ順番にアップグレードされます。ストレージアレイでの I/O の処理はアップグレードの実行中も継続されます。I/O を停止する必要はありませんオンラインアップグレードが可能なドライブの場合は、自動的にオンライン方式が使用されます。

オンラインアップグレードを実行できるドライブには、次のものがあります。

* 「最適」状態のプール内のドライブ
* 「最適」状態の冗長化されたボリュームグループ内のドライブ（ RAID 1 、 RAID 5 、および RAID 6 ）
* 未割り当てのドライブ
* スタンバイのホットスペアドライブ


ドライブファームウェアのオンラインアップグレードには数時間かかることがあり、その間はストレージアレイでボリューム障害が発生する可能性があります。ボリューム障害は次の状況で発生する可能性があります。

* RAID 1 または RAID 5 のボリュームグループで、あるドライブをアップグレードしているときに 1 本のドライブで障害が発生した場合。
* RAID 6 のプールまたはボリュームグループで、あるドライブをアップグレードしているときに別の 2 本のドライブで障害が発生した場合。




==== オフライン（並行処理）

オフラインアップグレードでは、同じドライブタイプのすべてのドライブが同時にアップグレードされます。この方式では、選択したドライブに関連付けられているボリュームへの I/O アクティビティを停止する必要があります。複数のドライブを同時に並行してアップグレードできるため、全体的なダウンタイムは大幅に短縮されます。オフラインアップグレードしか実行できないドライブの場合は、自動的にオフライン方式が使用されます。

次のドライブではオフライン方式を使用する必要があります。

* 非冗長ボリュームグループ内のドライブ（ RAID 0 ）
* 最適状態でないプールまたはボリュームグループ内のドライブ
* SSD キャッシュ内のドライブ




=== 互換性

各ドライブファームウェアファイルには、ファームウェアが実行されるドライブタイプに関する情報が含まれています。ファームウェアファイルは互換性のあるドライブにのみダウンロードできます。アップグレードプロセスの実行中に、 System Manager で自動的に互換性がチェックされます。
